---
layout: post
title: 离线缓存(manifest)
description: 离线缓存
category: blog
---

# 离线缓存(manifest)

##基本配置
	
	CACHE MANIFEST
	# version xx.xx.xx
	CACHE:    //需要缓存的文件
	needBeCached.png
	needBeCached2.js
	
	NETWORK:   //需要缓存，随时和服务器链接
	notNeedBeCached.html
	notNeedBeCached2.css
	
	FALLBACK:  //备用资源，当资源无法访问，通过这个访问
	/ 404.html
	
## 坑
### manifest除了缓存manifest.appcache文件所指定的资源外，还必定会缓存当前的html页面。
具体来说：

当用户第一次访问页面，会从服务器上拉取html页面，以及其它静态资源。
浏览器会把html页面，连同manifest.appcache文件，连同manifest.appcache文件里所指定的静态资源一并存入Application Cache。
当用户第二次访问该页面，manifest.appcache文件里所指定的静态资源就不需要重新加载了，直接从cache读出。这很好，问题是，当前的html页面也从cache直接读出来了，根本就不管线上的版本呀！
这造成的问题是，网站如果更新了，用户的浏览器根本不知道，还显示cache里的版本
